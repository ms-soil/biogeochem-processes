---
title: "Oil palm decomposition"
author: "Marcus Schmidt"
date: "8 November 2019"
output: github_document
---

### Background
This study was done on oil-palm plantations in Indonesia on two differen soil types.

### The code
Let's fist load our library. It is the tidyverse library, which includes useful tools for data handling and visualization, i.e. the ggplot 2 package.
```{r libraries, echo = T, results='hide', message=F, warning=F}
library("tidyverse")
```

Next, I am going to load my data from the .txt file I created and look at the first 5 observations too see what's going on:
```{r data-loading, echo = T, results = 'hide'}
DATA=read.table("data/schmidt-nut-data.txt",h=T)
head(DATA)
```

You may also want to try
```{r data-viewing, echo = T, results = 'hide', eval = F}
View(DATA)
```
to see the whole data set.

We now want to look at the first soil type (Clay Acrisol) at the first site, so we create a subset like this, using the pipe (%>%) from the tidyverse package. Then we check if this really worked.

```{r filtering, echo = T}
DATA<-DATA%>%filter(Plot == "C1")
unique(DATA$Plot)
```

The next part is key! We are plotting our Data - days and mass, fit an exponential cuve and retrieve k, our decomposition rate:


```{r fitting-and-plotting, echo = T}
xx <- seq(0,605, length=1500)
plot(DATA$Mass_g 
     ~ DATA$d)
y <- DATA$Mass_g
x <- DATA$d
fit <- nls(y ~ (50.81 * 2.718^(-k * x)), start=list(k=0.00001))
lines(xx, predict(fit, data.frame(x=xx)), col="red", lwd=2, lty=1)
summary(fit)
```

In the output above, we are given the k and some information on how well it fits the observed data.